<html><body><div class="definition"><pre><b>Node: </b><span style="color:#000080;font-weight:bold;">memory</span><br/><b>Declared in: </b>/<span class="grayed"> (esp32.overlay)</span></pre></div><div class="content">A memory device node is required for all devicetrees and describes the physical memory layout for the system. If a system has multiple ranges of memory, multiple memory nodes can be created, or the ranges can be specified in the reg property of a single memory node.<br/><br/>The client program may access memory not covered by any memory reservations using any storage attributes it chooses. However, before changing the storage attributes used to access a real page, the client program is responsible for performing actions required by the architecture and implementation, possibly including flushing the real page from the caches. The boot program is responsible for ensuring that, without taking any action associated with a change in storage attributes, the client program can safely access all memory (including memory covered by memory reservations) as WIMG = 0b001x. That is: <ul> <li>not Write Through Required</li> <li>not Caching Inhibited</li> <li>Memory Coherence</li> <li>Required either not Guarded or Guarded</li> </ul> If the VLE storage attribute is supported, with VLE=0.<br/><br/>For example, given a 64-bit Power system with the following physical memory layout: <ul> <li>RAM: starting address 0x0, length 0x80000000 (2 GB) </li> <li>RAM: starting address 0x100000000, length 0x100000000 (4 GB)</li> </ul> Memory nodes could be defined as follows, assuming #address-cells = &lt;2&gt; and #size-cells = &lt;2&gt;:<br/><br/><code><span style="color:#000080;font-weight:bold;">memory</span><span style="">@</span><span style="color:#0000ff;">0&#32;</span><span style="">{<br></span><span style="">&#32;&#32;&#32;&#32;</span><span style="color:#660e7a;font-weight:bold;">device_type&#32;</span><span style="">=&#32;</span><span style="color:#008000;font-weight:bold;">"memory"</span><span style="">;<br></span><span style="">&#32;&#32;&#32;&#32;</span><span style="color:#660e7a;font-weight:bold;">reg&#32;</span><span style="">=&#32;&lt;</span><span style="color:#0000ff;">0x000000000&#32;0x00000000&#32;0x00000000&#32;0x80000000</span><span style="">&gt;;<br></span><span style="">};<br></span><span style=""><br></span><span style="color:#000080;font-weight:bold;">memory</span><span style="">@</span><span style="color:#0000ff;">100000000&#32;</span><span style="">{<br></span><span style="">&#32;&#32;&#32;&#32;</span><span style="color:#660e7a;font-weight:bold;">device_type&#32;</span><span style="">=&#32;</span><span style="color:#008000;font-weight:bold;">"memory"</span><span style="">;<br></span><span style="">&#32;&#32;&#32;&#32;</span><span style="color:#660e7a;font-weight:bold;">reg&#32;</span><span style="">=&#32;&lt;</span><span style="color:#0000ff;">0x000000001&#32;0x00000000&#32;0x00000001&#32;0x00000000</span><span style="">&gt;;<br></span><span style="">};</span></code><br/><br/>The reg property is used to define the address and size of the two memory ranges. The 2 GB I/O region is skipped. Note that the #address-cells and #size-cells properties of the root node specify a value of 2, which means that two 32-bit cells are required to define the address and length for the reg property of the memory node.</div></body></html>